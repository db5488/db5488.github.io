<!DOCTYPE html>
<html>
  <head>
    <title>Debugging</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="assets/css/flipbook/lightbox.css" />
    <link rel="stylesheet" href="assets/css/flipbook/font-awesome.min.css" />
    <style>
      .thumbnail {
        display: inline-block;
        width: 120px;
        height: 160px;
        background-color: #ccc;
        margin: 0 5px;
        cursor: pointer;
      }
      .fullscreen {
        background-color: #333;
      }
    </style>
  </head>
  <body>
    <div class="books">
      <div class="thumbnail" data-book-id="book1">Book 1</div>
    </div>
  </body>
</html>
<script src="assets/vendor/flipbook/jquery.min.js"></script>
<script src="assets/vendor/flipbook/html2canvas.min.js"></script>
<script src="assets/vendor/flipbook/three.min.js"></script>
<script src="assets/vendor/flipbook/pdf.min.js"></script>
<script src="assets/vendor/flipbook/3dflipbook.min.js"></script>
<script src="assets/vendor/flipbook/lightbox.js"></script>

<script type="text/javascript">
  window.jQuery(function () {
    var $ = window.jQuery;
    var styleClb = function () {
        $('.fb3d-modal').removeClass('light').addClass('dark');
      },
      booksOptions = {
        book1: {
          pdf: 'assets/doc/266.pdf',
          template: {
            html: 'assets/templates/default-book-view.html',
            styles: ['assets/css/flipbook/short-white-book-view.css'],
            links: [
              {
                rel: 'stylesheet',
                href: 'assets/css/flipbook/font-awesome.min.css',
              },
            ],
            script: 'assets/vendor/flipbook/default-book-view.js',
            sounds: {
              startFlip: 'assets/sounds/start-flip.mp3',
              endFlip: 'assets/sounds/end-flip.mp3',
            },
          },
          styleClb: styleClb,
        },
      };

    var instance = {
      scene: undefined,
      options: undefined,
      node: $('.fb3d-modal .mount-container'),
    };

    var modal = $('.fb3d-modal');
    modal.on('fb3d.modal.hide', function () {
      instance.scene.dispose();
    });
    modal.on('fb3d.modal.show', function () {
      instance.scene = instance.node.FlipBook(instance.options);
      instance.options.styleClb();
    });
    $('.books')
      .find('.thumbnail')
      .click(function (e) {
        var target = $(e.target);
        while (target[0] && !target.attr('data-book-id')) {
          target = $(target[0].parentNode);
        }
        if (target[0]) {
          instance.options = booksOptions[target.attr('data-book-id')];
          $('.fb3d-modal').fb3dModal('show');
        }
      });
  });
</script>
